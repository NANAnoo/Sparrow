set(ExternalDir ${ProjectRootDir}/external)
set(ExternalFolder "external")

if(NOT TARGET Glad)
    include(Glad.cmake)
    set_target_properties(Glad PROPERTIES FOLDER ${ExternalFolder}/Glad)
endif()


# GLFW with the same name of project GLFW, so named "glfw"
if(NOT TARGET glfw)
    set(GLFW_BUILD_EXAMPLES OFF)
    set(GLFW_BUILD_TESTS OFF)
    set(GLFW_BUILD_DOCS OFF)
    set(GLFW_INSTALL OFF)
    add_subdirectory(GLFW)
    set_target_properties(glfw PROPERTIES FOLDER ${ExternalFolder}/GLFW)
endif()

if(NOT TARGET assimp)
    set(ASSIMP_BUILD_ASSIMP_TOOLS OFF)
    set(ASSIMP_BUILD_SAMPLES OFF)
    set(ASSIMP_BUILD_TESTS OFF)
    set(BUILD_SHARED_LIBS OFF)
    set(ASSIMP_BUILD_ZLIB ON)
    add_subdirectory(assimp)
    set_target_properties(assimp PROPERTIES FOLDER ${ExternalFolder}/assimp)
endif()

if (NOT TARGET cereal)
    add_subdirectory(cereal)
    option(BUILD_DOC "Build documentation" OFF)
    option(BUILD_SANDBOX "Build sandbox examples" OFF)
    option(SKIP_PERFORMANCE_COMPARISON "Skip building performance sandbox comparison (requires boost)" ON)
    set_target_properties(cereal PROPERTIES FOLDER ${ExternalFolder}/cereal)
endif()

if(NOT TARGET glm)
    set(BUILD_STATIC_LIBS ON)
    set(BUILD_TESTING OFF)
    set(GLM_TEST_ENABLE OFF)
    add_subdirectory(glm)
    set_target_properties(glm PROPERTIES FOLDER ${ExternalFolder}/glm)
endif()

if(NOT TARGET imgui)
    include(imgui.cmake)
    set_target_properties(imgui PROPERTIES FOLDER ${ExternalFolder}/imgui)
endif()

if (NOT TARGET sol2)
    set(SOL2_SYSTEM_INCLUDE OFF)
    set(SOL2_ENABLE_INSTALL OFF)
    set(SOL_USE_LUA_HPP ON)
    add_subdirectory(sol2)
    set_target_properties(sol2 PROPERTIES FOLDER ${ExternalFolder}/sol2)
endif()


if (NOT TARGET lua)
    add_subdirectory(lua)
    set_target_properties(lua PROPERTIES FOLDER ${ExternalFolder}/lua)
endif()

if (NOT TARGET luasocket)
    add_subdirectory(luasocket)
    target_include_directories(luasocket PRIVATE "${ExternalDir}/lua/lua-5.4.3/include")
    target_link_libraries(luasocket PRIVATE wsock32 ws2_32 lua_static )
    set_target_properties(luasocket PROPERTIES FOLDER ${ExternalFolder}/luasocket)
endif()


if (NOT TARGET stduuid)
    add_subdirectory(stduuid)
    set_target_properties(stduuid PROPERTIES FOLDER ${ExternalFolder}/stduuid)
endif()

if(NOT TARGET FMOD)
    include(fmod.cmake)
endif()

if(NOT TARGET Physx)
    include(Physx.cmake)
endif()

if(NOT TARGET headers)
    add_library(headers INTERFACE)
    target_include_directories(headers INTERFACE "${ExternalDir}")
    target_include_directories(headers INTERFACE "${ExternalDir}/entt/include")
    target_include_directories(headers INTERFACE "${ExternalDir}/sol2/include")
    target_include_directories(headers INTERFACE "${ExternalDir}/stduuid/include")
    target_include_directories(headers INTERFACE "${ExternalDir}/stb/")
    target_include_directories(headers INTERFACE "${ExternalDir}/lua/lua-5.4.3/include")
    target_include_directories(headers INTERFACE "${ExternalDir}/assimp/include")
    target_include_directories(headers INTERFACE "${ExternalDir}/cereal/include")
    target_include_directories(headers INTERFACE ${FmodIncludeDir})
    target_include_directories(headers INTERFACE ${PhysxIncludeDir})
endif()